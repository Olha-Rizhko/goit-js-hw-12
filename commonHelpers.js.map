{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/helpers/functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '43969100-31d832a553472532b672b1645';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nimport axios from 'axios';\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchPhotos = async (query, photosCurrentPage =1) => {\n  const response = await axios.get('', {\n    params: {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: PER_PAGE,\n    page: photosCurrentPage,\n    },\n  });\n\n  return response.data;\n};\n","export const createMarkup = images => {\n  return images.reduce(\n    ( html, { tags, webformatURL, largeImageURL, likes, views, comments, downloads } ) => {\n      return (\n        html +\n        `\n\t\t\t<li class=\"gallery-item item-gallery\">\n\t\t\t\t<a class=\"item-gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t<img class=\"item-gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n\t\t\t\t</a>\n\t\t\t\t<ul class=\"item-gallery-data\">\n\t\t\t\t\t<li class=\"item-gallery-data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery-subtitle\">Likes</h2>\n\t\t\t\t\t\t<p class=\"item-gallery-counter\">${likes}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery-data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery-subtitle\">Views</h2>\n\t\t\t\t\t\t<p class=\"item-gallery-counter\">${views}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery-data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery-subtitle\">Comments</h2>\n\t\t\t\t\t\t<p class=\"item-gallery-counter\">${comments}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"item-gallery-data-item\">\n\t\t\t\t\t\t<h2 class=\"item-gallery-subtitle\">Downloads</h2>\n\t\t\t\t\t\t<p class=\"item-gallery-counter\">${downloads}</p>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t`\n      );\n    },\n    ''\n  );\n};\n","export const hideLoader = loaderEl => {\n  loaderEl.classList.add('is-hidden');\n};\n\nexport const showLoader = loaderEl => {\n  loaderEl.classList.remove('is-hidden');\n};\n\nexport const hideLoadMoreBtn = loadMoreBtnEl => {\n  loadMoreBtnEl.classList.add('is-hidden');\n}\n\nexport const showLoadMoreBtn = loadMoreBtnEl => {\n  loadMoreBtnEl.classList.remove('is-hidden');\n}\n\nexport const disableSearchFormSubmitBtn = searchFormSubmitBtnEl => {\n  searchFormSubmitBtnEl.classList.add('is-disabled');\n}\n\nexport const enableSearchFormSubmitBtn = searchFormSubmitBtnEl => {\n  searchFormSubmitBtnEl.classList.remove('is-disabled');\n}\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { fetchPhotos, PER_PAGE } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nimport {\n  hideLoader,\n  showLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  disableSearchFormSubmitBtn,\n  enableSearchFormSubmitBtn,\n} from './js/helpers/functions.js';\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst searchFormEl = document.querySelector('.js-search-form');\nconst loaderEl = document.querySelector('.js-loader');\nconst searchFormSubmitBtnEl = document.querySelector('.js-search-form-submit-button');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-button');\n\nlet query = '';\nlet photosCurrentPage = 1;\nlet totalPages = 0;\n\nconst lightbox = new SimpleLightbox('.item-gallery-link', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\nconst onSearch = async event => {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  photosCurrentPage = 1;\n\n  hideLoadMoreBtn(loadMoreBtnEl);\n\n  const form = event.currentTarget;\n  query = form.elements.searchword.value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message:\n        'No images match your search. Please try again!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n\n  try {\n    disableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n    showLoader(loaderEl);\n    const { hits, totalHits } = await fetchPhotos(query, photosCurrentPage);\n    if (totalHits === 0) {\n      enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n      iziToast.error({\n        message:\n          'No images match your search. Please try again!',\n        position: 'topRight',\n      });\n      form.reset();\n      hideLoader(loaderEl);\n      return;\n    }\n\n    galleryEl.insertAdjacentHTML('beforeend', createMarkup(hits));\n    lightbox.refresh();\n\n    hideLoader(loaderEl);\n\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (totalPages > 1) {\n      showLoadMoreBtn(loadMoreBtnEl);\n    }\n  } catch (error) {\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n\n    hideLoader(loaderEl);\n\n    iziToast.error({\n      message: 'Search params is not valid!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n\n  form.reset();\n};\n\nsearchFormEl.addEventListener('submit', onSearch);\n\nconst smoothScrollOnLoadMore = () => {\n  const lastPhoto = document.querySelector('.gallery-item');\n  const photosHeight = lastPhoto.getBoundingClientRect().height;\n  const twoPhotosHeight = photosHeight * 2;\n  window.scrollBy({\n    top: twoPhotosHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nconst onLoadMorePress = async event => {\n  try {\n    hideLoadMoreBtn(loadMoreBtnEl);\n    showLoader(loaderEl);\n    photosCurrentPage += 1;\n    const { hits, totalHits } = await fetchPhotos(query, photosCurrentPage);\n    galleryEl.insertAdjacentHTML('beforeend', createMarkup(hits));\n    lightbox.refresh();\n    smoothScrollOnLoadMore();\n    hideLoader(loaderEl);\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (photosCurrentPage < totalPages) {\n      showLoadMoreBtn(loadMoreBtnEl);\n    } else {\n      loadMoreBtnEl.removeEventListener('click', onLoadMorePress);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n  } catch (error) {\n    enableSearchFormSubmitBtn(searchFormSubmitBtnEl);\n    hideLoader(loaderEl);\n    iziToast.error({\n      message: 'Search params is not valid!',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n};\n\nloadMoreBtnEl.addEventListener('click', onLoadMorePress);"],"names":["API_KEY","BASE_URL","PER_PAGE","axios","fetchPhotos","query","photosCurrentPage","createMarkup","images","html","tags","webformatURL","largeImageURL","likes","views","comments","downloads","hideLoader","loaderEl","showLoader","hideLoadMoreBtn","loadMoreBtnEl","showLoadMoreBtn","disableSearchFormSubmitBtn","searchFormSubmitBtnEl","enableSearchFormSubmitBtn","galleryEl","searchFormEl","totalPages","lightbox","SimpleLightbox","onSearch","event","form","iziToast","hits","totalHits","smoothScrollOnLoadMore","twoPhotosHeight","onLoadMorePress"],"mappings":"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"}